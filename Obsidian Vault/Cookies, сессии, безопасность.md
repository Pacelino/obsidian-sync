[[Сети#Что такое Cookie|Что такое куки?]]

### Аутификация и авторизация 

>Аунтификация - проверка подленности. Например: Вводим в сервис логин и пароль. Сервис ищет пользователся с таким логином и проверяет пароль

>Авторизация - проверка прав на доступ к тому или иному функционалу. 


### Хэш-функции 
>Алгоритм, принимующий данных определенной длинны и возвращающий данные фиксированной длинны. (SHA-256, SHA-512)
```
ПРИВЕТ, МИР!!!!!!!!!!!!!! => dfc9f0c4e3a5e400a23881d64191d49e5af4b69469c8a8e25e8f54307b3b967c
```
При малейшем изменении данных хэш меняется полностью. 

#### Хранение паролей

Небезопасно хранить логин и пароль в открытом в виде в бд (логин=пароль). 
Хранить их нужно в виде **хэшей**. 
Например: есть логин `Hocker2004@gmail.com` и пароль `YAVblCHISLUTEBYA`. 
Берем хэш функцию от этого пароля: `ba5b3245e7d8764d33c4181cc64c4c9fc027e1bb0a85f8cb18eabb81bd5cad18`.  И сохраняем логин с хэшем. 
От долбаебов, которые используют простые пароли и от этих паролей уже есть хэши. Используют "подсоление данных", берется простой пароль и к нему приклеивают длинную строку, а потом этот пароль со строкой переводят в хэш. 

### Cookies - кто есть по масти? 
>Небольшые текстовые данные хранящиеся в барузере. Пара ключ = значение. Может хранить аунтификацию сессии клиента. Отправляется с последующим [[Сети#HTTP|HTTP]] запросом и по этой аунтификации сервер понимает кто это. 

**Кто может установить Cookie?** 
- Серверная программа 
- javascript в баруезер
Есть куки HTTP only, который не виден из javascript. 

>Самая частая работа кук - сохранения состояния. 

Например: сервер просчитывает куку сесси и отправляет его в браузер, браузер сохраняет куку. Это помогает серверу лишний раз не проверят аунтификацию пользователя, а сразу его залогинеть. 

### Цифровая подпись Cookies

Для того чтобы не смогли так просто использовать чужие куки их можно привязать к
- Ip адресу пользователя 
- User agent браузера
- Ограничить время жизни куки
- Реализовать подпись кук

**Подпись кук** 
Есть кука 
```
session_id=b5913024u...
lang=ru
id=128
```
1) Для начала нужно отсортировать куки по алфавиту. 
```
id=128
lang=ru
session_id=b5913024u...
```
2) Потом их склеиваем, добавляя соль
```
id=128;lang=ru;session_id=b5913024u...lka;jsfjasd;flkjasdf;aslkfj12314;l
```
3) Подсчитываем соль этой строки
```
09c52b33a88760a8251df2bbb9e4acf755954c54fc72197ce935e2bc107d4327
```
4) Этот хэш сохраняем в отдельный куки 
```
sign=09c52b33a88760a8251df2bbb9e4acf755954c54fc72197ce935e2bc107d4327
```
В итоге имеем кук
```
session_id=b5913024u...
lang=ru
id=128
sign=09c52b33a88760a8251df2bbb9e4acf755954c54fc72197ce935e2bc107d4327
```